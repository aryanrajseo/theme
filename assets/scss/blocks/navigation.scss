$navigation_padding: calc(var(--wp--style--block-gap, 1em) / 2);

.wp-block-navigation {

	a {
		text-decoration: inherit;
	}

	// 782px hardcoded in core.
	@media (max-width: 782px) {
		& {
			font-size: 1em;
		}
	}

	.wp-block-navigation-item__content {
		display: flex;

		&.wp-block-navigation-submenu__toggle {
			padding-left: 0;
			padding-right: 0;
		}
	}
}

.wp-block-navigation:not(.is-responsive) {
	margin: auto;
}

.wp-block-navigation__submenu-container {
	border: none;
	border-radius: var(--wp--custom--border--radius);
	gap: var(--wp--custom--submenu--gap, calc(var(--wp--style--block-gap, 1em) / 2));
}

.wp-block-navigation:not(.has-background) .wp-block-navigation__submenu-container {
	background: var(--wp--custom--submenu--background, var(--wp--custom--body--background, inherit));
	color: var(--wp--custom--submenu--color, inherit);
	border: var(--wp--custom--submenu--border, 0);
}

.wp-block-navigation-submenu__toggle {
	font-weight: inherit;
}

.wp-block-navigation__responsive-container-close,
.wp-block-navigation__responsive-container-open {
	background: transparent !important;
	color: currentColor !important;

	svg {
		width: 30px;
		height: 30px;
	}
}

.wp-block-navigation .wp-block-navigation__submenu-container {
	padding-top: calc(var(--wp--style--block-gap) / 2);
	padding-bottom: calc(var(--wp--style--block-gap) / 2);

	.wp-block-navigation-item__content {
		padding: 0;
	}
}

.wp-block-navigation:not(.has-background) .wp-block-navigation__submenu-container {
	color: inherit;
}

.wp-block-navigation__responsive-container.is-menu-open {
	padding: var(--wp--preset--spacing--md);
}

.wp-block-navigation:not(.has-background) .wp-block-navigation__responsive-container.is-menu-open {
	background: var(--wp--custom--body--background, #fff);
	color: currentColor; // #000 hardcoded in core.
}

// TODO: Remove when merged into core or Gutenberg active.
.has-modal-open .admin-bar .wp-block-navigation__responsive-dialog {
	margin-top: 46px;
}

// Theme.json doesn't work.
.wp-block-navigation:not(.is-vertical) .wp-block-navigation-item {
	margin-bottom: 0;

	@media (max-width: 782px) {
		margin-bottom: var(--wp--style--block-gap, 1em);
	}

	.wp-block-navigation-item {
		padding-left: 0;
		padding-right: 0;
	}
}

/**
 * Vertical.
 */

.wp-block-navigation.is-vertical {
	.wp-block-navigation__submenu-icon {
		display: none;
	}

	.wp-block-navigation-item {
		flex-wrap: wrap;
		margin-bottom: var(--wp--style--block-gap, 1em);
	}

	.has-child {
		margin-bottom: 0;

		.wp-block-navigation__submenu-container {
			position: relative;
			height: auto;
			opacity: 1;
			visibility: visible;
			width: 100%;
			background-color: transparent !important;
			left: auto;
			top: auto;
			padding: 0;
		}

		> .wp-block-pages-list__item__link {
			margin-bottom: var(--wp--style--block-gap, 1em);
		}
	}
}

.wp-block-navigation__responsive-container .wp-block-navigation-link a {
	&:hover,
	&:focus {
		color: var(--wp--preset--color--primary);
	}
}

@media (max-width: 782px) {
	.wp-block-navigation .wp-block-navigation-item.has-child {
		padding-bottom: 0;
	}

	.wp-block-navigation__submenu-container {
		gap: var(--wp--custom--submenu--gap);
		padding: $navigation_padding 0 0;
	}

	.wp-block-navigation__responsive-container .wp-block-navigation__submenu-container {
		padding-left: var(--wp--style--block-gap) !important;
		padding-right: var(--wp--style--block-gap) !important;
	}
}

// Reset needed as default is too low (600px).
@media (min-width: 600px) {
	.wp-block-navigation__responsive-container-open:not(.always-shown) {
		display: flex;
	}

	.wp-block-navigation__responsive-container:not(.hidden-by-default):not(.is-menu-open) .wp-block-navigation__responsive-container-close {
		display: flex;
	}

	.wp-block-navigation__responsive-container:not(.hidden-by-default):not(.is-menu-open) {
		display: none;
		width: initial;
		position: initial;
		z-index: auto;
		background-color: inherit;
	}
}

// Use same breakpoint as core columns block for consistency.
// TODO: Allow custom breakpoint.
@media (min-width: 782px) {

	ul.wp-block-navigation__container > li,
	ul.wp-block-page-list > li {
		padding: calc(var(--wp--style--block-gap, 1em) / 2) 0;
	}

	.wp-block-navigation:not(.is-vertical) .wp-block-navigation__submenu-container {
		padding: $navigation_padding;
	}

	.wp-block-navigation__responsive-container-open:not(.always-shown) {
		display: none !important;
	}

	.wp-block-navigation__responsive-container:not(.hidden-by-default):not(.is-menu-open) .wp-block-navigation__responsive-container-close {
		display: none;
	}

	.wp-block-navigation__responsive-container:not(.hidden-by-default):not(.is-menu-open) {
		display: block;
		width: 100%;
		position: relative;
		z-index: auto;
		background-color: inherit;
	}

	.wp-block-navigation-item__label {
		white-space: nowrap !important;
	}

	.wp-block-navigation__submenu-container .wp-block-navigation-item__label {
		white-space: pre-wrap !important;
	}
}
